.fireworks-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
  z-index: 50;
}

.firework-particle {
  position: absolute;
  border-radius: 50%;
}

/* Primary burst - large particles that bloom outward slowly */
.firework-primary {
  animation: firework-bloom 4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

/* Secondary particles - medium size, slightly faster */
.firework-secondary {
  animation: firework-bloom-secondary 3.5s cubic-bezier(0.22, 0.61, 0.36, 1) forwards;
}

/* Sparkle particles - tiny, twinkling, slow fade */
.firework-sparkle {
  animation: firework-sparkle 5s ease-out forwards;
}

/* Trail particles - follow behind, create depth */
.firework-trail {
  animation: firework-trail 4.5s cubic-bezier(0.23, 1, 0.32, 1) forwards;
}

@keyframes firework-bloom {
  0% {
    transform: translate(0, 0) scale(0.5);
    opacity: 0;
  }
  5% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }
  15% {
    opacity: 1;
  }
  100% {
    transform: translate(
        calc(cos(var(--angle)) * var(--speed)),
        calc(sin(var(--angle)) * var(--speed) * 0.6 - var(--rise))
      )
      scale(0.1);
    opacity: 0;
  }
}

@keyframes firework-bloom-secondary {
  0% {
    transform: translate(0, 0) scale(0.3);
    opacity: 0;
  }
  8% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }
  20% {
    opacity: 0.9;
  }
  100% {
    transform: translate(
        calc(cos(var(--angle)) * var(--speed) * 0.7),
        calc(sin(var(--angle)) * var(--speed) * 0.5 - var(--rise) * 0.8)
      )
      scale(0);
    opacity: 0;
  }
}

@keyframes firework-sparkle {
  0% {
    transform: translate(0, 0) scale(0);
    opacity: 0;
  }
  10% {
    transform: translate(
        calc(cos(var(--angle)) * var(--speed) * 0.1),
        calc(sin(var(--angle)) * var(--speed) * 0.1)
      )
      scale(1);
    opacity: 1;
  }
  30%, 50%, 70% {
    opacity: 1;
  }
  40%, 60%, 80% {
    opacity: 0.4;
  }
  100% {
    transform: translate(
        calc(cos(var(--angle)) * var(--speed) * 0.5),
        calc(sin(var(--angle)) * var(--speed) * 0.3 - var(--rise) * 1.2)
      )
      scale(0);
    opacity: 0;
  }
}

@keyframes firework-trail {
  0% {
    transform: translate(0, 0) scale(0.2);
    opacity: 0;
  }
  15% {
    transform: translate(
        calc(cos(var(--angle)) * var(--speed) * 0.2),
        calc(sin(var(--angle)) * var(--speed) * 0.1 - var(--rise) * 0.2)
      )
      scale(1);
    opacity: 0.8;
  }
  100% {
    transform: translate(
        calc(cos(var(--angle)) * var(--speed) * 0.9),
        calc(sin(var(--angle)) * var(--speed) * 0.5 - var(--rise) * 1.5)
      )
      scale(0);
    opacity: 0;
  }
}

/* Fallback for browsers that don't support CSS trigonometry */
@supports not (transform: translate(calc(cos(45deg) * 1px), 0)) {
  .firework-primary,
  .firework-secondary,
  .firework-sparkle,
  .firework-trail {
    animation: firework-bloom-fallback 4s ease-out forwards;
  }

  @keyframes firework-bloom-fallback {
    0% {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
    100% {
      transform: translateY(-150px) scale(0);
      opacity: 0;
    }
  }
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .firework-particle {
    animation: none;
    opacity: 0;
  }
}
